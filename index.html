<!doctype html>

<html lang="en">
    
    <head>
        <meta charset="utf-8">

        <title>kianjones.com - Infrastructure Engineer</title>
        <meta name="description" content="Kian Jones - Infrastructure Engineer @ Letta, building systems for AI agents">
        
        <link rel="stylesheet" href="style.css">
        
    </head>
    
    <body>
        
        <div class="ide-container">
            <!-- Title Bar -->
            <div class="title-bar">
                <div class="title-bar-left">
                    <span class="window-controls">
                        <span class="control close"></span>
                        <span class="control minimize"></span>
                        <span class="control maximize"></span>
                    </span>
                    <span class="app-title">kianjones.com - VS Code</span>
                </div>
                <div class="title-bar-center">README.md</div>
                <div class="title-bar-right">
                    <div class="theme-switcher-container">
                        <button id="theme-switcher" class="theme-button">üé®</button>
                        <div id="theme-dropdown" class="theme-dropdown">
                            <div class="theme-option" data-theme="0">üü£ Purple</div>
                            <div class="theme-option" data-theme="1">üü† Orange</div>
                            <div class="theme-option" data-theme="2">üü¢ Green</div>
                            <div class="theme-option" data-theme="3">üî¥ Red</div>
                            <div class="theme-option" data-theme="4">üîµ Cyan</div>
                            <div class="theme-option" data-theme="5">üü° Yellow</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main IDE Layout -->
            <div class="ide-main">
                <!-- Sidebar -->
                <div class="sidebar">
                    <div class="sidebar-header">
                        <div class="sidebar-title">EXPLORER</div>
                    </div>
                    <div class="file-tree">
                        <div class="folder open">
                            <div class="folder-header" onclick="toggleFolder(this)">
                                <span class="folder-icon">üìÅ</span>
                                <span class="folder-name">kianjones.com</span>
                            </div>
                            <div class="folder-content">
                                <div class="file active" onclick="loadFile('readme')">
                                    <span class="file-icon">üìÑ</span>
                                    <span class="file-name">README.md</span>
                                </div>
                                <div class="file" onclick="loadFile('bio')">
                                    <span class="file-icon">üë§</span>
                                    <span class="file-name">bio.md</span>
                                </div>
                                <div class="file" onclick="loadFile('contact')">
                                    <span class="file-icon">üìß</span>
                                    <span class="file-name">contact.md</span>
                                </div>
                                <div class="folder">
                                    <div class="folder-header" onclick="toggleFolder(this)">
                                        <span class="folder-icon">üìÅ</span>
                                        <span class="folder-name">posts/</span>
                                    </div>
                                    <div class="folder-content" id="posts-folder-content">
                                        <!-- Posts will be loaded dynamically -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Sidebar Resize Handle -->
                <div class="resize-handle sidebar-resize"></div>

                <!-- Content Area -->
                <div class="content-area">
                    <div class="tab-bar">
                        <div class="tab active">
                            <span class="tab-icon">üìÑ</span>
                            <span class="tab-name">README.md</span>
                            <span class="tab-close">√ó</span>
                        </div>
                    </div>
                    <div class="editor">
                        <div class="line-numbers">
                            <div class="line-number">1</div>
                            <div class="line-number">2</div>
                            <div class="line-number">3</div>
                            <div class="line-number">4</div>
                            <div class="line-number">5</div>
                            <div class="line-number">6</div>
                            <div class="line-number">7</div>
                            <div class="line-number">8</div>
                            <div class="line-number">9</div>
                            <div class="line-number">10</div>
                            <div class="line-number">11</div>
                            <div class="line-number">12</div>
                            <div class="line-number">13</div>
                            <div class="line-number">14</div>
                            <div class="line-number">15</div>
                            <div class="line-number">16</div>
                            <div class="line-number">17</div>
                            <div class="line-number">18</div>
                            <div class="line-number">19</div>
                            <div class="line-number">20</div>
                        </div>
                        <div class="scroll-container">
                            <div class="editor-content scroll-content" id="editor-content">
                                <h1>Kian Jones</h1>

                                <p><strong>Infrastructure Engineer @ <a href="https://letta.com">Letta</a></strong><br>
                                Building the backbone for next-generation AI agents</p>

                                <h2>About</h2>

                                <p>Infrastructure specialist with deep expertise in cloud architecture, networking, 
                                and observability. Currently architecting scalable systems that enable AI agents 
                                to operate reliably at massive scale.</p>

                                <h2>Experience</h2>

                                <ul>
                                <li><strong>Letta</strong> - Infrastructure Engineer (AI Agent Platform)</li>
                                <li><strong>Covariant</strong> - Cloud & Infrastructure</li>
                                <li><strong>Meta</strong> - Platform Engineering</li>
                                <li><strong>Nokia</strong> - Network Infrastructure</li>
                                <li><strong>CENGN</strong> - Research & Development</li>
                                <li><strong>Environment Canada</strong> - Systems Engineering</li>
                                <li><strong>SurveyMonkey</strong> - Backend Infrastructure</li>
                                </ul>

                                <h2>Expertise</h2>

                                <h3>üèóÔ∏è Cloud Architecture</h3>
                                <p>AWS, GCP, Kubernetes, Terraform, Infrastructure as Code</p>

                                <h3>üìä Observability</h3>
                                <p>Monitoring, Logging, Distributed Tracing, Performance Metrics</p>

                                <h3>üåê Networking</h3>
                                <p>Load Balancing, CDN, Service Mesh, Network Security</p>

                                <h3>ü§ñ AI Infrastructure</h3>
                                <p>GPU Clusters, Model Serving, Agent Orchestration, Auto-scaling</p>

                                <h2>Current Focus</h2>

                                <p>Building the infrastructure that powers thousands of concurrent AI agents at Letta.
                                From Kubernetes orchestration to observability systems, creating the foundation
                                for the future of AI agent interactions.</p>

                                <hr>
                                <p><em>Navigate using the file explorer ‚Üí or try the terminal below ‚Üì</em></p>
                            </div>
                            <div class="custom-scrollbar" id="editor-scrollbar">
                                <div class="custom-scrollbar-thumb" id="editor-thumb"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Terminal Resize Handle -->
            <div class="resize-handle terminal-resize"></div>

            <!-- Terminal Panel -->
            <div class="terminal-panel">
                <div class="terminal-header">
                    <div class="terminal-tabs">
                        <div class="terminal-tab active">
                            <span class="terminal-icon">‚ö°</span>
                            <span>Terminal</span>
                        </div>
                    </div>
                </div>
                <div class="terminal-content">
                    <div class="scroll-container">
                        <div class="terminal-output scroll-content" id="terminal-output">
                            <div class="terminal-input-line">
                                <span class="prompt">kian@letta:~/kianjones.com$</span>
                                <span class="input-container">
                                    <input type="text" id="terminal-input" placeholder="" />
                                </span>
                            </div>
                        </div>
                        <div class="custom-scrollbar" id="terminal-scrollbar">
                            <div class="custom-scrollbar-thumb" id="terminal-thumb"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Posts configuration
            const POSTS_CONFIG = [
                {
                    id: '2021-language-learning-review',
                    title: '2021 Language Learning Review',
                    folder: '2021 Language Learning Review',
                    filename: '2021-language-learning-review.html',
                    date: '2021-01-10',
                    icon: 'üó£Ô∏è'
                },
                {
                    id: '2022-resolutions-part-1-end-of-year-review', 
                    title: '2022 Resolutions Part 1 End of Year Review',
                    folder: '2022 Resolutions Part 1 End of Year Review',
                    filename: '2021-year-end-review.html',
                    date: '2021-01-03',
                    icon: 'üìÖ'
                }
            ];

            // Function to load post content dynamically
            async function loadPostContent(postConfig) {
                try {
                    const postUrl = `posts/${encodeURIComponent(postConfig.folder)}/${postConfig.filename}`;
                    console.log('Loading post from:', postUrl);
                    const response = await fetch(postUrl);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    const html = await response.text();
                    
                    // Extract content div
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const contentDiv = doc.querySelector('.content');
                    
                    if (contentDiv) {
                        let content = contentDiv.innerHTML;
                        // Fix image paths
                        const postDir = `posts/${encodeURIComponent(postConfig.folder)}/`;
                        content = content.replace(/src="(?!http|\/)/g, `src="${postDir}`);
                        return content;
                    }
                    
                    return `<h1>${postConfig.title}</h1><p>Content could not be loaded. <a href="${postUrl}" target="_blank">View original post ‚Üí</a></p>`;
                    
                } catch (error) {
                    console.error('Failed to load post:', error);
                    return `<h1>${postConfig.title}</h1><p>Error loading post content. <a href="posts/${encodeURIComponent(postConfig.folder)}/${postConfig.filename}" target="_blank">View original post ‚Üí</a></p>`;
                }
            }

            // Static content
            const staticContent = {
                'readme': `<h1>Kian Jones</h1>
<p><strong>Infrastructure Engineer @ <a href="https://letta.com">Letta</a></strong><br>
Building the backbone for next-generation AI agents</p>
<h2>About</h2>
<p>Infrastructure specialist with deep expertise in cloud architecture, networking, 
and observability. Currently architecting scalable systems that enable AI agents 
to operate reliably at massive scale.</p>
<h2>Experience</h2>
<ul>
<li><strong>Letta</strong> - Infrastructure Engineer (AI Agent Platform)</li>
<li><strong>Covariant</strong> - Cloud & Infrastructure</li>
<li><strong>Meta</strong> - Platform Engineering</li>
<li><strong>Nokia</strong> - Network Infrastructure</li>
<li><strong>CENGN</strong> - Research & Development</li>
<li><strong>Environment Canada</strong> - Systems Engineering</li>
<li><strong>SurveyMonkey</strong> - Backend Infrastructure</li>
</ul>
<h2>Expertise</h2>
<h3>üèóÔ∏è Cloud Architecture</h3>
<p>AWS, GCP, Kubernetes, Terraform, Infrastructure as Code</p>
<h3>üìä Observability</h3>
<p>Monitoring, Logging, Distributed Tracing, Performance Metrics</p>
<h3>üåê Networking</h3>
<p>Load Balancing, CDN, Service Mesh, Network Security</p>
<h3>ü§ñ AI Infrastructure</h3>
<p>GPU Clusters, Model Serving, Agent Orchestration, Auto-scaling</p>
<h2>Current Focus</h2>
<p>Building the infrastructure that powers thousands of concurrent AI agents at Letta.
From Kubernetes orchestration to observability systems, creating the foundation
for the future of AI agent interactions.</p>
<hr>
<p><em>Navigate using the file explorer ‚Üí or try the terminal below ‚Üì</em></p>`,
                'bio': `<h1>Bio</h1>
<h2>Kian Jones - Infrastructure Engineer</h2>
<p>Currently building the foundational systems that power AI agents at Letta. 
Passionate about creating robust, scalable infrastructure that enables the 
next generation of artificial intelligence to operate seamlessly.</p>
<h3>Background</h3>
<p>With extensive experience across cloud platforms, networking, and observability,
I specialize in designing systems that can handle massive scale while maintaining
reliability and performance.</p>
<h3>Philosophy</h3>
<p>Great infrastructure is invisible - it just works. My focus is on building
systems that developers and AI agents can rely on, allowing them to focus
on innovation rather than operational concerns.</p>`,
                'contact': `<h1>Contact</h1>
<h2>Get in Touch</h2>
<p><strong>Email</strong>: <a href="mailto:kian@kianjones.com">kian@kianjones.com</a><br>
<strong>LinkedIn</strong>: <a href="https://linkedin.com/in/kianjones">linkedin.com/in/kianjones</a><br>
<strong>GitHub</strong>: <a href="https://github.com/kianjones">github.com/kianjones</a><br>
<strong>Twitter</strong>: <a href="https://twitter.com/kianjones">@kianjones</a></p>
<h3>Open to Discuss</h3>
<ul>
<li>Infrastructure architecture and scaling challenges</li>
<li>AI/ML platform engineering opportunities</li>
<li>Cloud-native system design</li>
<li>Observability and monitoring strategies</li>
<li>Open source contributions</li>
</ul>
<hr>
<p><em>Always happy to talk about infrastructure, AI agents, and building scalable systems!</em></p>`,
                'letta-infra': `<h1>Letta Infrastructure Project</h1>
<h2>Overview</h2>
<p>Building the scalable infrastructure backbone for Letta's AI agent platform.</p>
<h3>Responsibilities</h3>
<ul>
<li>Kubernetes cluster management and optimization</li>
<li>CI/CD pipeline design and implementation</li>
<li>Monitoring and observability systems</li>
<li>Cost optimization and resource management</li>
</ul>
<h3>Technologies</h3>
<ul>
<li><strong>Cloud</strong>: AWS, GCP</li>
<li><strong>Orchestration</strong>: Kubernetes, Docker</li>
<li><strong>Monitoring</strong>: Prometheus, Grafana, Jaeger</li>
<li><strong>IaC</strong>: Terraform, Helm</li>
</ul>
<h3>Impact</h3>
<p>Enabling thousands of concurrent AI agent conversations while maintaining 
sub-second response times and 99.9% uptime.</p>`
            };

            // Load file function
            async function loadFile(fileName) {
                const editorContent = document.getElementById('editor-content');
                
                // Remove active class from all files
                document.querySelectorAll('.file').forEach(f => f.classList.remove('active'));
                
                // Add active class to clicked file
                if (event) {
                    event.target.closest('.file').classList.add('active');
                }
                
                // Check if it's a dynamic post
                const postConfig = POSTS_CONFIG.find(post => post.id === fileName);
                let content = '';
                let displayName = fileName;
                let icon = 'üìÑ';
                
                if (postConfig) {
                    // It's a dynamic post
                    displayName = postConfig.title;
                    icon = postConfig.icon;
                    
                    // Show loading
                    editorContent.innerHTML = '<p>Loading post...</p>';
                    
                    try {
                        content = await loadPostContent(postConfig);
                    } catch (error) {
                        console.error('Failed to load post:', error);
                        content = `<h1>${postConfig.title}</h1><p>Error loading post content.</p>`;
                    }
                } else {
                    // Static content
                    content = staticContent[fileName] || 'File not found';
                    
                    // Set display names and icons for static files
                    const staticNames = {
                        'readme': 'README.md',
                        'bio': 'bio.md',
                        'contact': 'contact.md',
                        'letta-infra': 'letta-infrastructure.md'
                    };
                    
                    const staticIcons = {
                        'readme': 'üìÑ',
                        'bio': 'üë§',
                        'contact': 'üìß',
                        'letta-infra': 'üèóÔ∏è'
                    };
                    
                    displayName = staticNames[fileName] || fileName;
                    icon = staticIcons[fileName] || 'üìÑ';
                }
                
                // Update tab
                const tabName = document.querySelector('.tab-name');
                const tabIcon = document.querySelector('.tab-icon');
                
                tabIcon.textContent = icon;
                tabName.textContent = displayName;
                
                // Update title bar
                document.querySelector('.title-bar-center').textContent = displayName;
                
                // Update content
                editorContent.innerHTML = content;
                
                // Update line numbers after content change
                updateLineNumbers();
            }

            // Initialize posts sidebar
            function initializePosts() {
                console.log('Initializing posts sidebar...');
                
                const postsContainer = document.getElementById('posts-folder-content');
                if (!postsContainer) {
                    console.error('Posts container not found!');
                    return;
                }
                
                // Clear existing content
                postsContainer.innerHTML = '';
                
                // Add posts from config
                POSTS_CONFIG.forEach(post => {
                    console.log('Adding post:', post.title);
                    
                    const fileDiv = document.createElement('div');
                    fileDiv.className = 'file';
                    fileDiv.onclick = () => {
                        console.log('Clicking post:', post.id);
                        loadFile(post.id);
                    };
                    
                    fileDiv.innerHTML = `
                        <span class="file-icon">${post.icon}</span>
                        <span class="file-name">${post.title}</span>
                    `;
                    
                    postsContainer.appendChild(fileDiv);
                });
                
                console.log('Posts sidebar initialized with', POSTS_CONFIG.length, 'posts');
            }

            // Toggle folder function
            function toggleFolder(header) {
                const folder = header.closest('.folder');
                const content = folder.querySelector('.folder-content');
                const icon = header.querySelector('.folder-icon');
                
                if(folder.classList.contains('open')) {
                    folder.classList.remove('open');
                    content.style.display = 'none';
                    icon.textContent = 'üìÅ';
                } else {
                    folder.classList.add('open');
                    content.style.display = 'block'; 
                    icon.textContent = 'üìÇ';
                }
            }

            // Function to update line numbers for current content
            function updateLineNumbers() {
                const editorContent = document.getElementById('editor-content');
                const content = editorContent.innerHTML;
                
                // Count actual rendered lines by creating a temporary element
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = content;
                tempDiv.style.cssText = 'position: absolute; left: -9999px; top: -9999px; width: auto; height: auto; white-space: pre-wrap; font-family: Monaco, monospace; font-size: 14px; line-height: 1.5;';
                document.body.appendChild(tempDiv);
                
                // Get the actual height and calculate lines
                const lineHeight = parseInt(window.getComputedStyle(tempDiv).lineHeight);
                const totalHeight = tempDiv.offsetHeight;
                const lines = Math.max(1, Math.ceil(totalHeight / lineHeight));
                
                document.body.removeChild(tempDiv);
                
                // Update line numbers
                const lineNumbers = document.querySelector('.line-numbers');
                lineNumbers.innerHTML = '';
                for(let i = 1; i <= lines; i++) {
                    const lineDiv = document.createElement('div');
                    lineDiv.className = 'line-number';
                    lineDiv.textContent = i;
                    lineNumbers.appendChild(lineDiv);
                }
            }

            // Terminal functionality
            const terminalInput = document.getElementById('terminal-input');
            const terminalOutput = document.getElementById('terminal-output');
            
            // Generate file system structure dynamically
            function generateFileSystem() {
                const postsChildren = {};
                POSTS_CONFIG.forEach(post => {
                    postsChildren[post.title] = { type: 'file', content: post.id };
                });
                
                return {
                    '/': {
                        'README.md': { type: 'file', content: 'readme' },
                        'bio.md': { type: 'file', content: 'bio' },
                        'contact.md': { type: 'file', content: 'contact' },
                        'posts/': {
                            type: 'directory',
                            children: postsChildren
                        }
                    }
                };
            }
            
            let fileSystem = generateFileSystem();
            let currentPath = '/';

            const commands = {
                help: () => `Available commands:
  ls [-al] [dir] - list files in directory
                   -a  show all files (including . and ..)
                   -l  long format with details
  cat <file>     - show file content  
  clear          - clear terminal
  whoami         - show user info
  pwd            - current directory
  cd <dir>       - change directory`,
                
                ls: (...args) => {
                    let flags = [];
                    let target = '.';
                    
                    // Parse arguments to separate flags from directory
                    for (const arg of args) {
                        if (arg && arg.startsWith('-')) {
                            flags.push(...arg.slice(1).split(''));
                        } else if (arg) {
                            target = arg;
                        }
                    }
                    
                    const targetPath = resolvePath(currentPath, target);
                    const dirObj = getDirectoryContents(targetPath);
                    
                    if (!dirObj) {
                        return `ls: ${target}: No such file or directory`;
                    }
                    
                    if (dirObj.type === 'file') {
                        return formatLsOutput([target.split('/').pop()], flags);
                    }
                    
                    // Get entries from the correct location
                    let entries;
                    if (dirObj.children) {
                        entries = Object.keys(dirObj.children);
                    } else {
                        entries = Object.keys(dirObj).filter(key => key !== 'type');
                    }
                    
                    // Add hidden entries if -a flag is present
                    if (flags.includes('a')) {
                        entries = ['.', '..', ...entries];
                    }
                    
                    entries.sort();
                    return formatLsOutput(entries, flags, dirObj);
                },

                cd: (dir = '/') => {
                    const newPath = resolvePath(currentPath, dir);
                    const dirObj = getDirectoryContents(newPath);
                    
                    if (!dirObj) {
                        return `cd: ${dir}: No such file or directory`;
                    }
                    
                    if (dirObj.type === 'file') {
                        return `cd: ${dir}: Not a directory`;
                    }
                    
                    currentPath = newPath;
                    return '';
                },
                
                pwd: () => `/home/kian/kianjones.com${currentPath === '/' ? '' : currentPath}`,
                
                whoami: () => `kian - Infrastructure Engineer @ Letta`,
                
                clear: () => {
                    terminalOutput.innerHTML = '';
                    return '';
                },
                
                cat: (file) => {
                    if (!file) {
                        return 'cat: missing file operand';
                    }
                    
                    const filePath = resolvePath(currentPath, file);
                    const fileObj = getDirectoryContents(filePath);
                    
                    if (!fileObj) {
                        return `cat: ${file}: No such file or directory`;
                    }
                    
                    if (fileObj.type === 'directory') {
                        return `cat: ${file}: Is a directory`;
                    }
                    
                    const content = staticContent[fileObj.content];
                    return content || `cat: ${file}: No such file or directory`;
                }
            };

            // Format ls output based on flags
            function formatLsOutput(entries, flags, dirObj = null) {
                if (flags.includes('l')) {
                    // Long format
                    const lines = entries.map(entry => {
                        if (entry === '.' || entry === '..') {
                            return `drwxr-xr-x  1 kian  staff    0 Dec 20 10:30 ${entry}`;
                        }
                        
                        const entryObj = dirObj && dirObj.children ? dirObj.children[entry] : null;
                        const isDir = entryObj && entryObj.type === 'directory';
                        const permissions = isDir ? 'drwxr-xr-x' : '-rw-r--r--';
                        const size = isDir ? '0' : '1024';
                        
                        return `${permissions}  1 kian  staff  ${size.padStart(4)} Dec 20 10:30 ${entry}`;
                    });
                    return lines.join('\n');
                } else {
                    // Simple format
                    return entries.join('  ') || '';
                }
            }

            // Helper functions for file system navigation
            function resolvePath(current, target) {
                if (target === '.') return current;
                if (target === '..') {
                    const parts = current.split('/').filter(p => p);
                    if (parts.length === 0) return '/';
                    parts.pop();
                    return parts.length === 0 ? '/' : '/' + parts.join('/');
                }
                if (target.startsWith('/')) return target;
                
                const currentParts = current === '/' ? [] : current.split('/').filter(p => p);
                const targetParts = target.split('/').filter(p => p);
                
                // Process .. and . in the target path
                const resolvedParts = [...currentParts];
                for (const part of targetParts) {
                    if (part === '.') {
                        continue; // Stay in current directory
                    } else if (part === '..') {
                        if (resolvedParts.length > 0) {
                            resolvedParts.pop(); // Go up one level
                        }
                    } else {
                        resolvedParts.push(part);
                    }
                }
                
                return resolvedParts.length === 0 ? '/' : '/' + resolvedParts.join('/');
            }

            function getDirectoryContents(path) {
                if (path === '/') return fileSystem['/'];
                
                const parts = path.split('/').filter(p => p);
                let current = fileSystem['/'];
                
                for (const part of parts) {
                    // Try both with and without trailing slash
                    const dirKey = part + '/';
                    const fileKey = part;
                    
                    // Check in children first (for directories)
                    if (current.children) {
                        if (current.children[dirKey]) {
                            current = current.children[dirKey];
                            continue;
                        }
                        if (current.children[fileKey]) {
                            current = current.children[fileKey];
                            continue;
                        }
                    }
                    
                    // Check in current level
                    if (current[dirKey]) {
                        current = current[dirKey];
                        continue;
                    }
                    if (current[fileKey]) {
                        current = current[fileKey];
                        continue;
                    }
                    
                    // Not found
                    return null;
                }
                
                return current;
            }

            // Command history
            let commandHistory = [];
            let historyIndex = -1;

            function executeCommand(commandLine, showOnly = false) {
                // Add command to output (always show the prompt line, even for empty commands)
                const cmdDiv = document.createElement('div');
                cmdDiv.className = 'terminal-line';
                const currentDir = currentPath === '/' ? '' : currentPath;
                cmdDiv.innerHTML = `<span class="prompt">kian@letta:~/kianjones.com${currentDir}$</span> ${commandLine}`;
                
                // Insert before the input line
                const inputLine = document.querySelector('.terminal-input-line');
                terminalOutput.insertBefore(cmdDiv, inputLine);
                
                // If showOnly is true (for tab completion), don't execute
                if (showOnly) return;
                
                // If empty command, just add new prompt
                if (!commandLine.trim()) {
                    return;
                }

                // Parse and execute
                const parts = commandLine.split(' ');
                const cmd = parts[0];
                const args = parts.slice(1);

                let result = '';
                if (commands[cmd]) {
                    result = commands[cmd](...args);
                } else {
                    result = `bash: ${cmd}: command not found`;
                }

                if (result) {
                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'output';
                    resultDiv.textContent = result;
                    
                    // Insert before the input line
                    const inputLine = document.querySelector('.terminal-input-line');
                    terminalOutput.insertBefore(resultDiv, inputLine);
                }

                // Update the input prompt only if directory changed
                if (cmd === 'cd' && !result) {
                    updatePrompt();
                }

                // Scroll to bottom and maintain input focus
                setTimeout(() => {
                    terminalOutput.scrollTop = terminalOutput.scrollHeight;
                    terminalInput.focus();
                }, 0);
            }

            function updatePrompt() {
                const promptElement = document.querySelector('.terminal-input-line .prompt');
                const currentDir = currentPath === '/' ? '' : currentPath;
                promptElement.textContent = `kian@letta:~/kianjones.com${currentDir}$`;
            }

            terminalInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const command = terminalInput.value.trim();
                    executeCommand(command);
                    if (command) {
                        commandHistory.push(command);
                    }
                    historyIndex = commandHistory.length;
                    terminalInput.value = '';
                    // Ensure cursor stays at the beginning
                    setTimeout(() => {
                        terminalInput.focus();
                    }, 0);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    if (historyIndex > 0) {
                        historyIndex--;
                        terminalInput.value = commandHistory[historyIndex];
                        // Move cursor to end
                        setTimeout(() => {
                            terminalInput.setSelectionRange(terminalInput.value.length, terminalInput.value.length);
                        }, 0);
                    }
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (historyIndex < commandHistory.length - 1) {
                        historyIndex++;
                        terminalInput.value = commandHistory[historyIndex];
                    } else {
                        historyIndex = commandHistory.length;
                        terminalInput.value = '';
                    }
                    // Move cursor to end
                    setTimeout(() => {
                        terminalInput.setSelectionRange(terminalInput.value.length, terminalInput.value.length);
                    }, 0);
                }
            });

            // Terminal click to focus
            document.querySelector('.terminal-content').addEventListener('click', (e) => {
                terminalInput.focus();
            });

            // Initialize
            document.addEventListener('DOMContentLoaded', () => {
                // Initialize posts sidebar
                initializePosts();
                
                // Update line numbers for the default README content
                updateLineNumbers();
                
                // Focus terminal input
                terminalInput.focus();
                
                // Show help command on load
                executeCommand('help');
            });
        </script>
        
    </body>

</html>